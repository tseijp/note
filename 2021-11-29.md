---
tags: [React.js, JavaScript]
title: class based React.js hooks
description: class based React.js hooks
authors: tsei
image: https://github.com/tseijp.png
hide_table_of_contents: false
---

# class based React.js hooks

Reactã§è¤‡é›‘ãªå‡¦ç†ã‚’åŠ ãˆãŸã¨ãã€`useMemo, useCallback`ã ã‚‰ã‘ã«ãªã£ãŸã‚Šã€
`useRef, xxxRef.current`ã ã‚‰ã‘ã«ãªã‚Šã€èª­ã¿ã«ãã„ã‚³ãƒ¼ãƒ‰ã«ãªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ã§ã€Ctrlã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã€hookã‹ã‚‰æ“ä½œã—ã¾ã™ã€‚
ä¾‹ã¨ã—ã¦ã€`useDelay.ts`ã‚’å®šç¾©ã—ã¾ã™ã€‚
ã“ã®ãƒ•ãƒƒã‚¯ã¯ã€å®Ÿè¡Œã‚’å°‘ã—é…ã‚‰ã›ã‚‹ã“ã¨ã§ã€é‡ã„å‡¦ç†ãªã©ãŒé‡è¤‡ã™ã‚‹ã®ã‚’é˜²ãã¾ã™ã€‚
[useDelay test - CodeSandbox][1]

[1]: https://codesandbox.io/s/uv2qz

<!--truncate-->

```jsx
import React from 'react'

class Ctrl {
  listener = () => {};
  callback = () => {};
  timeStamp = 1000;

  apply(callback = () => {}, timeStamp = 1000) {
    this.callback = callback;
    this.timeStamp = timeStamp;
    return this.delay.bind(this);
  }

  delay(...args) {
    const timeout = window.setTimeout(this.callback, this.timeStamp, ...args);
    this.listener();
    this.listener = () => void window.clearTimeout(timeout);
  }
}

export default function $(callback = () => {}, timeStamp = 1000) {
  const [ctrl] = React.useState(() => new Ctrl());
  React.useEffect(() => ctrl.listener, [ctrl]);
  return ctrl.apply(callback, timeStamp);
}
```

`apply`ã¯stateãŒå¤‰åŒ–ã™ã‚‹ã”ã¨ã«ãŒå®Ÿè¡Œã•ã‚Œã€çŠ¶æ…‹ã‚„è¿”ã™é–¢æ•°ã‚’æ›´æ–°ã—ã¦ã„ã¾ã™ã€‚
`delay`ã¯å®Ÿè¡Œæ¯ã«`listener`ã‚’ãƒªã‚»ãƒƒãƒˆã—ã€æ™‚é–“ãŒãŸã¤ã¨`callback`ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
æ¬¡ã®ã‚¢ãƒ—ãƒªã§ã¯ã€æ–‡å­—ã®æ‰“ã¡è¾¼ã¿ãŒçµ‚ã‚ã£ãŸ1ç§’ã”ã¨ã«ã€`callback`ãŒå‹•ä½œã—ã¾ã™ã€‚
[codesandbox][1] ã§ã‚‚è©¦ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

```jsx
import React from "react";
import ReactDOM from "react-dom";
import $ from './useDelay';

function App() {
  const [state, set] = React.useState`âš¡Lets write hereâš¡`;
  return (
    <>
      { state }
      <input
        onKeyDown={(e) => set`ğŸ›Now writingğŸ›`}
        onKeyUp={$((e) => set`âœ…Completedâœ…`, 1000)}
      />
    </>
  );
}

ReactDOM.render(<App />, document.getElementById`root`);
```
